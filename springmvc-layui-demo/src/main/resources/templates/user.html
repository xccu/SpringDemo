<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link rel="stylesheet" href="/css/layui.css">

    <style>
        body{padding: 10px;}
    </style>
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>用户信息</legend>
</fieldset>
<form class="layui-form layui-form-pane1" action="" lay-filter="first">
    <table width="500" style="margin-left: 30px">
        <tr>
            <td width="90" style="float: top">
                <img id ="avatar" layer-src="" th:src="${user.avatarUrl}" class="layui-nav-img" style="width: 100px; height: 100px"/>
            </td>
            <td>

                <div class="layui-form-item">
                    <label class="layui-form-label" style="width: 30px">ID</label>
                    <div class="layui-input-block" style="margin-left: 60px">
                        <input type="text" name="id" autocomplete="off" class="layui-input" th:value="${user.id}" >
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width: 30px">姓名</label>
                    <div class="layui-input-block" style="margin-left: 60px">
                        <input type="text" name="name" lay-verify="required|title" lay-reqText="不能为空"  autocomplete="off" class="layui-input" th:value="${user.name}">
                    </div>
                </div>

            </td>
        </tr>
        <tr style="height: 20px"></tr>
        <tr>
            <td colspan="2">
                <!--<div class="layui-form-item">
                    <label class="layui-form-label" style="width: 30px">性别</label>
                    <div class="layui-input-block" style="margin-left: 60px">
                        <input type="text" name="sex" lay-verify="email"  lay-verType="alert" autocomplete="off" class="layui-input" th:value="${user.sex}">
                    </div>
                </div>-->

                <div class="layui-form-item" pane>
                    <label class="layui-form-label">性别</label>
                    <div class="layui-input-block">
                        <input type="radio" name="sex" id="r-male" value="男" title="男">
                        <input type="radio" name="sex"  id="r-female" value="女" title="女">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" style="width: 30px">生日</label>
                    <div class="layui-input-block" style="margin-left: 60px">
                        <input type="text" name="date" id="date" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width: 30px">年龄</label>
                    <div class="layui-input-block" style="margin-left: 60px">
                        <input type="text" name="age" lay-verify="age" class="layui-input" th:value="${user.age}">
                    </div>
                </div>
            </td>
        </tr>

    </table>



</form>

<br><br><br>


<script src="/layui.js"></script>
<script src="/js/jquery.min.js"  charset="utf-8"></script>
<!-- <script src="../build/lay/dest/layui.all.js"></script> -->
<script th:inline="javascript">

    function setSexRadio(sex){

        if(sex=="male"){
            $("input[name='sex']").get(0).checked=true;
        }
        else {
            $("input[name='sex']").get(1).checked=true;
        }

    }

    layui.use(['form', 'layedit', 'laydate'], function(){
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate;

        var sex= [[${user.sex}]];
        setSexRadio(sex);
        //更新渲染
        form.render();


        //自定义验证规则(有问题)
        form.verify({
            /*title: function(value){
                if(value.length < 5){
                    return '标题也太短了吧';
                }
            }
            ,money: [
                /^\d+\.\b\d{2}\b$/
                ,'金额必须为小数保留两位'
            ],*/
            /*age: [/(.+){1,2}$/, '必须1到2位']*/

        });

        //日期
        laydate.render({
            elem: '#date'
        });


        //事件监听
        form.on('select', function(data){
            console.log('select: ', this, data);
        });

        form.on('select(quiz)', function(data){
            console.log('select.quiz：', this, data);
        });

        form.on('select(interest)', function(data){
            console.log('select.interest: ', this, data);
        });



        form.on('checkbox', function(data){
            console.log(this.checked, data.elem.checked);
        });

        form.on('switch', function(data){
            console.log(data);
        });

        form.on('radio', function(data){
            console.log(data);
        });

        //监听提交
        form.on('submit(*)', function(data){
            console.log(data)
            alert(JSON.stringify(data.field));
            return false;
        });
    });

</script>

</body>
</html>
